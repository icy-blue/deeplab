<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>DeepLab 测试</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/static/bootstrap/3.3.7/css/bootstrap.min.css" crossorigin="anonymous"/>

    <link rel="stylesheet" href="/static/icon/bootstrap-icons.css" crossorigin="anonymous"/>

    <link rel="stylesheet" href="/static/bootstrap/3.3.7/css/all.css" crossorigin="anonymous"/>


    <!-- Bootstrap 主题 -->
    <link rel="stylesheet" href="/static/bootstrap/3.3.7/css/bootstrap-theme.min.css" crossorigin="anonymous"/>

    <link rel="stylesheet" href="/static/bootstrap-fileinput/css/fileinput.css" crossorigin="anonymous"/>

    <link rel="stylesheet" href="/static/bootstrap-fileinput/css/fileinput-rtl.min.css" crossorigin="anonymous"/>

    <link rel="stylesheet" href="/static/bootstrap-fileinput/themes/explorer-fas/theme.min.css" crossorigin="anonymous"/>

    <!-- jQuery -->
    <script src="/static/jquery/3.2.1/jquery.min.js" crossorigin="anonymous"></script>

    <!-- Bootstrap JS -->
    <script src="/static/bootstrap/3.3.7/js/bootstrap.min.js" crossorigin="anonymous"></script>

    <script src="/static/bootstrap-fileinput/js/fileinput.js" crossorigin="anonymous"></script>

    <script src="/static/bootstrap-fileinput/js/locales/zh.js" crossorigin="anonymous"></script>

    <script src="/static/bootstrap-fileinput/themes/explorer-fas/theme.min.js" crossorigin="anonymous"></script>

</head>
<body>
    <nav class="navbar navbar-inverse navbar-static-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <span class="navbar-brand">DeepLab测试</span>
            </div>
        </div>
    </nav>
    <div class="container" style="display: flex">
        <div id="left">
            <input id="fileinput" class="file" type="file" accept="image/*" >
            <button type="button" class="btn btn-primary btn-block" style="margin-top: 10px" id="submit">识别</button>
        </div>
        <div id="right" style="padding-left: 50px;flex-grow: 3">
            <div id="showimg" style="display: none">
                <img src="" id="img" class="img-thumbnail" style="max-width: 512px;"/>
            </div>
        </div>
    </div>
    <script>
        let input = document.getElementById("fileinput");
        input.addEventListener('change', function(e){
            let file = document.getElementById("input").files[0];
            let img = document.getElementById("img");
            handle(img, file);
        });
        $("#submit").click(()=>{
            $('#img').attr('src', '/static/tmp.png?time=' + Math.random());
            $('#showimg').attr('style', 'text-align: center');
        });
        function handle(img, file) {
            img.classList.add("obj");
            img.file = file;
            let reader = new FileReader();
            reader.onload = (function(aImg) { return function(e) { aImg.src = e.target.result; }; })(img);
            reader.readAsDataURL(file);
        }
        $(document).ready(
            function() {
                console.log("done");
            });
    </script>
</body>

</html>